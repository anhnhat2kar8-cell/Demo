--// Khởi tạo ScreenGui
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "AutoMenu"

--// Khung chính
local MainFrame = Instance.new("Frame", gui)
MainFrame.Size = UDim2.new(0, 260, 0, 280)
MainFrame.Position = UDim2.new(0.7, 0, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
MainFrame.BorderSizePixel = 0

-- Bo tròn
local corner = Instance.new("UICorner", MainFrame)
corner.CornerRadius = UDim.new(0, 10)

-- Viền 7 màu
local stroke = Instance.new("UIStroke", MainFrame)
stroke.Thickness = 3

local gradient = Instance.new("UIGradient", stroke)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,0)),
    ColorSequenceKeypoint.new(0.16, Color3.fromRGB(255,255,0)),
    ColorSequenceKeypoint.new(0.33, Color3.fromRGB(0,255,0)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0,255,255)),
    ColorSequenceKeypoint.new(0.66, Color3.fromRGB(0,0,255)),
    ColorSequenceKeypoint.new(0.83, Color3.fromRGB(255,0,255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,0))
}

-- Hiệu ứng viền xoay 7 màu
task.spawn(function()
    while task.wait(0.03) do
        gradient.Rotation = (gradient.Rotation + 2) % 360
    end
end)

-- Hàm tạo nút
local function createButton(text, posY)
    local btn = Instance.new("TextButton", MainFrame)
    btn.Size = UDim2.new(1, -20, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.Text = "TẮT: " .. text
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
    return btn
end

-- Nút chức năng
local btnBoss       = createButton("Đánh Boss", 10)
local btnAutoDanh   = createButton("Auto Đánh", 55)
local btnAutoBangGac= createButton("Auto Băng Gạc", 100)
local btnAutoLum    = createButton("Auto Lụm", 145)

-- Label máu
local hpLabel = Instance.new("TextLabel", MainFrame)
hpLabel.Size = UDim2.new(1, -20, 0, 60)
hpLabel.Position = UDim2.new(0, 10, 0, 195)
hpLabel.BackgroundTransparency = 1
hpLabel.TextColor3 = Color3.fromRGB(0,255,0)
hpLabel.Font = Enum.Font.SourceSansBold
hpLabel.TextSize = 18
hpLabel.Text = "Máu mục tiêu: ...\nMáu bạn: ..."

-- Trạng thái toggle
local toggles = {}

-- Hàm hiệu ứng LED RGB cho nút
local function rainbowEffect(button, stateVar)
    task.spawn(function()
        local t = 0
        while toggles[stateVar] do
            local r = math.sin(t) * 127 + 128
            local g = math.sin(t + 2) * 127 + 128
            local b = math.sin(t + 4) * 127 + 128
            button.BackgroundColor3 = Color3.fromRGB(r, g, b)
            t = t + 0.1
            task.wait(0.05)
        end
    end)
end

-- Hiệu ứng rung nhẹ
local function shake(frame)
    local pos = frame.Position
    for i = 1,3 do
        frame.Position = pos + UDim2.new(0, math.random(-5,5), 0, math.random(-5,5))
        task.wait(0.05)
    end
    frame.Position = pos
end

-- Toggle nút
local function toggle(btn, varName)
    toggles[varName] = not toggles[varName]
    if toggles[varName] then
        btn.Text = "BẬT: " .. btn.Text:split(": ")[2]
        rainbowEffect(btn, varName)
    else
        btn.Text = "TẮT: " .. btn.Text:split(": ")[2]
        btn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
    end
    shake(MainFrame)
end

-- Gán sự kiện click
btnBoss.MouseButton1Click:Connect(function() toggle(btnBoss, "autoBoss") end)
btnAutoDanh.MouseButton1Click:Connect(function() toggle(btnAutoDanh, "autoDanh") end)
btnAutoBangGac.MouseButton1Click:Connect(function() toggle(btnAutoBangGac, "autoBangGac") end)
btnAutoLum.MouseButton1Click:Connect(function() toggle(btnAutoLum, "autoLum") end)

-- Vòng lặp update máu (test)
task.spawn(function()
    while task.wait(0.5) do
        local myHP = math.random(50,130)
        local bossHP = math.random(0,12000)
        hpLabel.Text = "Máu mục tiêu: " .. bossHP .. "\nMáu bạn: " .. myHP .. "/130"
    end
end)
