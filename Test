--// Load Orion Library
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

--// Cửa sổ chính
local Window = OrionLib:MakeWindow({
    Name = "🇻🇳 TestHub By VietNhat",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "TestHub"
})

--// ===== TAB MAIN =====
local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Auto Băng Gạc
MainTab:AddToggle({
    Name = "Auto Băng Gạc",
    Default = false,
    Callback = function(Value)
        getgenv().AutoBangGac = Value
        while getgenv().AutoBangGac do
            task.wait(1)
            local char = game.Players.LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.Health = char.Humanoid.MaxHealth
            end
        end
    end
})

-- Auto Buy Băng Gạc
MainTab:AddToggle({
    Name = "Auto Buy Băng Gạc",
    Default = false,
    Callback = function(Value)
        getgenv().AutoBuy = Value
        while getgenv().AutoBuy do
            task.wait(2)
            print("Đang mua băng gạc...") 
            -- Thêm code mua item shop nếu game hỗ trợ
        end
    end
})

--// ===== TAB FARM =====
local FarmTab = Window:MakeTab({
    Name = "Farm",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Auto Farm Gỗ
FarmTab:AddToggle({
    Name = "Auto Farm Gỗ",
    Default = false,
    Callback = function(Value)
        getgenv().AutoFarm = Value
        while getgenv().AutoFarm do
            task.wait(2)
            print("Đang farm gỗ...")
        end
    end
})

-- Auto Lượm Đồ
FarmTab:AddToggle({
    Name = "Auto Lượm Đồ",
    Default = false,
    Callback = function(Value)
        getgenv().AutoLoot = Value
        while getgenv().AutoLoot do
            task.wait(1)
            for _, item in pairs(workspace:GetChildren()) do
                if item:IsA("Tool") or (item:IsA("Part") and item:FindFirstChild("TouchInterest")) then
                    firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, item, 0)
                    firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, item, 1)
                    print("Lượm đồ: " .. item.Name)
                end
            end
        end
    end
})

--// ===== TAB COMBAT =====
local CombatTab = Window:MakeTab({
    Name = "Combat",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Auto Đánh Boss
CombatTab:AddToggle({
    Name = "Auto Đánh Boss",
    Default = false,
    Callback = function(Value)
        getgenv().AutoBoss = Value
        while getgenv().AutoBoss do
            task.wait(0.5)
            local char = game.Players.LocalPlayer.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if hrp then
                for _, mob in pairs(workspace:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 and mob.Name:match("Boss") then
                        hrp.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0,0,-3)
                        game:GetService("VirtualUser"):ClickButton1(Vector2.new())
                        print("Đang đánh Boss: " .. mob.Name)
                    end
                end
            end
        end
    end
})

-- Auto Đánh Quái
CombatTab:AddToggle({
    Name = "Auto Đánh Quái",
    Default = false,
    Callback = function(Value)
        getgenv().AutoMob = Value
        while getgenv().AutoMob do
            task.wait(0.5)
            local char = game.Players.LocalPlayer.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if hrp then
                for _, mob in pairs(workspace:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") 
                       and mob.Humanoid.Health > 0 
                       and not mob.Name:match("Boss") 
                       and mob ~= char then
                        hrp.CFrame = mob.HumanoidRootPart.CFrame * CFrame.new(0,0,-3)
                        game:GetService("VirtualUser"):ClickButton1(Vector2.new())
                        print("Đang đánh Quái: " .. mob.Name)
                    end
                end
            end
        end
    end
})

-- Auto Teleport tới quái gần nhất
CombatTab:AddToggle({
    Name = "Auto Teleport Quái gần nhất",
    Default = false,
    Callback = function(Value)
        getgenv().AutoTPMob = Value
        while getgenv().AutoTPMob do
            task.wait(1)
            local char = game.Players.LocalPlayer.Character
            local hrp = char and char:FindFirstChild("HumanoidRootPart")
            if hrp then
                local nearest, dist = nil, math.huge
                for _, mob in pairs(workspace:GetChildren()) do
                    if mob:FindFirstChild("Humanoid") 
                       and mob.Humanoid.Health > 0 
                       and not mob.Name:match("Boss") 
                       and mob ~= char then
                        local d = (hrp.Position - mob.HumanoidRootPart.Position).Magnitude
                        if d < dist then
                            dist = d
                            nearest = mob
                        end
                    end
                end
                if nearest then
                    hrp.CFrame = nearest.HumanoidRootPart.CFrame * CFrame.new(0,0,-3)
                    game:GetService("VirtualUser"):ClickButton1(Vector2.new())
                    print("Dịch chuyển & đánh quái: " .. nearest.Name)
                end
            end
        end
    end
})

--// ===== TAB SETTINGS =====
local SettingsTab = Window:MakeTab({
    Name = "Settings",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Bật nhạc nền
SettingsTab:AddToggle({
    Name = "Bật nhạc nền",
    Default = false,
    Callback = function(Value)
        if Value then
            local Sound = Instance.new("Sound", game.Workspace)
            Sound.SoundId = "rbxassetid://1837465145" -- đổi ID tuỳ thích
            Sound.Looped = true
            Sound:Play()
        else
            for _,v in pairs(game.Workspace:GetChildren()) do
                if v:IsA("Sound") then v:Destroy() end
            end
        end
    end
})

--// Khởi chạy
OrionLib:Init()
