-- ‚ö° UI Auto ƒê√°nh Boss
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
local mainFrame = Instance.new("Frame", ScreenGui)
mainFrame.Size = UDim2.new(0, 300, 0, 300)
mainFrame.Position = UDim2.new(0.75, 0, 0.2, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 2

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
title.Text = "AUTO ƒê√ÅNH BOSS"
title.TextColor3 = Color3.fromRGB(255, 255, 0)
title.Font = Enum.Font.SourceSansBold
title.TextScaled = true

-- Th√¥ng tin m√°u
local bossHpLabel = Instance.new("TextLabel", mainFrame)
bossHpLabel.Size = UDim2.new(1, 0, 0, 30)
bossHpLabel.Position = UDim2.new(0, 0, 0, 40)
bossHpLabel.BackgroundTransparency = 1
bossHpLabel.Text = "M√°u m·ª•c ti√™u: ..."
bossHpLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
bossHpLabel.Font = Enum.Font.SourceSansBold
bossHpLabel.TextScaled = true

local myHpLabel = Instance.new("TextLabel", mainFrame)
myHpLabel.Size = UDim2.new(1, 0, 0, 30)
myHpLabel.Position = UDim2.new(0, 0, 0, 70)
myHpLabel.BackgroundTransparency = 1
myHpLabel.Text = "M√°u b·∫°n: ???"
myHpLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
myHpLabel.Font = Enum.Font.SourceSansBold
myHpLabel.TextScaled = true

-- üî• Thanh m√°u Boss
local bossHealthFrame = Instance.new("Frame", mainFrame)
bossHealthFrame.Size = UDim2.new(0, 250, 0, 20)
bossHealthFrame.Position = UDim2.new(0.5, -125, 0, 110)
bossHealthFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
bossHealthFrame.BorderSizePixel = 2

local bossHealthBar = Instance.new("Frame", bossHealthFrame)
bossHealthBar.Size = UDim2.new(1, 0, 1, 0)
bossHealthBar.BackgroundColor3 = Color3.fromRGB(0, 255, 0)

local bossHealthText = Instance.new("TextLabel", bossHealthFrame)
bossHealthText.Size = UDim2.new(1, 0, 1, 0)
bossHealthText.BackgroundTransparency = 1
bossHealthText.TextColor3 = Color3.fromRGB(255, 255, 255)
bossHealthText.TextScaled = true
bossHealthText.Font = Enum.Font.SourceSansBold
bossHealthText.Text = "Boss HP: ..."

-- ‚ö° H√†m update m√°u Boss
local function updateBossHealth(humanoid)
    if not humanoid then
        bossHpLabel.Text = "M√°u m·ª•c ti√™u: ..."
        bossHealthBar.Size = UDim2.new(0, 0, 1, 0)
        bossHealthText.Text = "Boss HP: ..."
        return
    end

    local current = math.floor(humanoid.Health)
    local maxhp = math.floor(humanoid.MaxHealth)
    local percent = math.clamp(current / maxhp, 0, 1)
    local percentText = math.floor(percent * 100)

    bossHpLabel.Text = "M√°u m·ª•c ti√™u: " .. current .. "/" .. maxhp
    bossHealthBar.Size = UDim2.new(percent, 0, 1, 0)
    bossHealthText.Text = "Boss HP: " .. current .. " / " .. maxhp .. " (" .. percentText .. "%)"

    if percent > 0.5 then
        bossHealthBar.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- xanh
    elseif percent > 0.2 then
        bossHealthBar.BackgroundColor3 = Color3.fromRGB(255, 255, 0) -- v√†ng
    else
        bossHealthBar.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- ƒë·ªè
    end
end

-- ‚ö° Update m√°u ng∆∞·ªùi ch∆°i
local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local humanoid = char:WaitForChild("Humanoid")

humanoid:GetPropertyChangedSignal("Health"):Connect(function()
    myHpLabel.Text = "M√°u b·∫°n: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)
end)

-- ‚ö° Auto t√¨m Boss g·∫ßn nh·∫•t
local function getNearestBoss()
    local nearest, dist = nil, math.huge
    for _, mob in pairs(workspace:GetChildren()) do
        if mob:FindFirstChild("Humanoid") and mob:FindFirstChild("HumanoidRootPart") and mob:FindFirstChild("BossTag") then
            local d = (mob.HumanoidRootPart.Position - char.HumanoidRootPart.Position).Magnitude
            if d < dist then
                dist = d
                nearest = mob
            end
        end
    end
    return nearest
end

-- ‚ö° Lu·ªìng update li√™n t·ª•c
spawn(function()
    while task.wait(0.5) do
        local boss = getNearestBoss()
        if boss and boss:FindFirstChild("Humanoid") then
            updateBossHealth(boss.Humanoid)
        else
            updateBossHealth(nil)
        end
    end
end)
