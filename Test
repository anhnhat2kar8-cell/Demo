local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local lp = Players.LocalPlayer
local chr = lp.Character or lp.CharacterAdded:Wait()
local hum = chr:WaitForChild("Humanoid")
local hrp = chr:WaitForChild("HumanoidRootPart")

-- Biáº¿n tráº¡ng thÃ¡i
local running = false
local autoAttack = false
local autoHeal = false
local autoLoot = false
local autoWood = false
local radius, speed = 20, 2
local lastWeapon = nil

--// GUI
local gui = Instance.new("ScreenGui", lp:WaitForChild("PlayerGui"))
gui.Name = "MatNhanThucMenu"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.5, -150, 0.5, -200)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

-- TiÃªu Ä‘á»
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, -20, 0, 35)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Text = "ðŸŒ€ Máº¥t Nháº­n Thá»©c"
title.TextColor3 = Color3.new(1,1,1)
title.TextScaled = true
title.Font = Enum.Font.SourceSansBold
title.TextXAlignment = Enum.TextXAlignment.Center

-- Hiá»‡u á»©ng cáº§u vá»“ng cho tiÃªu Ä‘á»
task.spawn(function()
    local hue = 0
    while title do
        hue = (hue + 1) % 360
        title.TextColor3 = Color3.fromHSV(hue/360,1,1)
        task.wait(0.05)
    end
end)

-- ScrollingFrame
local scroll = Instance.new("ScrollingFrame", frame)
scroll.Size = UDim2.new(1, -20, 1, -50)
scroll.Position = UDim2.new(0,10,0,45)
scroll.CanvasSize = UDim2.new(0,0,0,0)
scroll.ScrollBarThickness = 5
scroll.BackgroundTransparency = 1

local list = Instance.new("UIListLayout", scroll)
list.SortOrder = Enum.SortOrder.LayoutOrder
list.Padding = UDim.new(0,5)
list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scroll.CanvasSize = UDim2.new(0,0,0,list.AbsoluteContentSize.Y+10)
end)

-- Hiá»ƒn thá»‹ mÃ¡u Boss
local hpLabel = Instance.new("TextLabel", scroll)
hpLabel.Size = UDim2.new(1,0,0,30)
hpLabel.Text = "MÃ¡u Boss: ..."
hpLabel.TextColor3 = Color3.new(1,0,0)
hpLabel.BackgroundTransparency = 1
hpLabel.TextScaled = true

-- Hiá»ƒn thá»‹ mÃ¡u báº¡n
local myHpLabel = Instance.new("TextLabel", scroll)
myHpLabel.Size = UDim2.new(1,0,0,30)
myHpLabel.Text = "MÃ¡u báº¡n: ..."
myHpLabel.TextColor3 = Color3.new(0,1,0)
myHpLabel.BackgroundTransparency = 1
myHpLabel.TextScaled = true

-- HÃ m toggle
local function makeSwitch(text, callback)
    local btn = Instance.new("TextButton", scroll)
    btn.Size = UDim2.new(1,0,0,35)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.Text = "â¹ "..text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.SourceSansBold
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

    local state = false
    btn.MouseButton1Click:Connect(function()
        state = not state
        if state then
            btn.BackgroundColor3 = Color3.fromRGB(0,170,255)
            btn.Text = "âœ… "..text
        else
            btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
            btn.Text = "â¹ "..text
        end
        callback(state)
    end)
end

-- HÃ m nháº­p giÃ¡ trá»‹ (textbox nhá»)
local function makeInput(labelText, default, callback)
    local container = Instance.new("Frame", scroll)
    container.Size = UDim2.new(1,0,0,30)
    container.BackgroundTransparency = 1

    local label = Instance.new("TextLabel", container)
    label.Size = UDim2.new(0.5, -5, 1, 0)
    label.Position = UDim2.new(0,0,0,0)
    label.Text = labelText
    label.TextColor3 = Color3.new(1,1,1)
    label.BackgroundTransparency = 1
    label.TextScaled = true

    local box = Instance.new("TextBox", container)
    box.Size = UDim2.new(0.5, -5, 1, 0)
    box.Position = UDim2.new(0.5,5,0,0)
    box.Text = tostring(default)
    box.BackgroundColor3 = Color3.fromRGB(40,40,40)
    box.TextColor3 = Color3.new(1,1,1)
    box.TextScaled = true
    Instance.new("UICorner", box).CornerRadius = UDim.new(0,6)

    box.FocusLost:Connect(function()
        local num = tonumber(box.Text)
        if num then callback(num) else box.Text = tostring(default) end
    end)
end

-- Toggle chá»©c nÄƒng
makeSwitch("Fram Boss", function(v) running = v end)
makeSwitch("Auto Attack", function(v) autoAttack = v end)
makeSwitch("Auto Heal", function(v) autoHeal = v end)
makeSwitch("Auto Loot", function(v) autoLoot = v end)
makeSwitch("Cháº·t Gá»—", function(v) autoWood = v end)

-- Input chá»‰nh Radius & Speed
makeInput("Khoáº£ng cÃ¡ch", radius, function(v) radius = v end)
makeInput("Tá»‘c Ä‘á»™ quay", speed, function(v) speed = v end)

-- HÃ m tÃ¬m Boss
local function getTarget()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v:FindFirstChild("Humanoid") and v ~= chr and v:FindFirstChild("HumanoidRootPart") and v.Humanoid.Health > 0 then
            return v
        end
    end
end

-- Auto Heal
task.spawn(function()
    while true do
        if autoHeal and hum.Health < 80 then
            if lp.Character then
                local tool = lp.Character:FindFirstChildOfClass("Tool")
                if tool and not tool.Name:lower():find("bÄƒng") then
                    lastWeapon = tool
                end
            end
            local bandage = lp.Character and lp.Character:FindFirstChildWhichIsA("Tool")
            if not bandage or not bandage.Name:lower():find("bÄƒng") then
                for _,tool in ipairs(lp.Backpack:GetChildren()) do
                    if tool:IsA("Tool") and tool.Name:lower():find("bÄƒng") then
                        tool.Parent = lp.Character
                        task.wait(0.2)
                        break
                    end
                end
            end
            local healTool = lp.Character:FindFirstChildWhichIsA("Tool")
            if healTool and healTool.Name:lower():find("bÄƒng") then
                healTool:Activate()
                task.wait(1)
                if lastWeapon and lastWeapon.Parent == lp.Backpack then
                    lastWeapon.Parent = lp.Character
                end
            end
        end
        task.wait(0.5)
    end
end)

-- Auto Loot
task.spawn(function()
    while true do
        if autoLoot then
            for _,prompt in pairs(workspace:GetDescendants()) do
                if prompt:IsA("ProximityPrompt") and (prompt.Parent:IsA("BasePart") or prompt.Parent:IsA("MeshPart")) then
                    local dist = (hrp.Position - prompt.Parent.Position).Magnitude
                    if dist < 15 then
                        fireproximityprompt(prompt)
                        task.wait(0.2)
                    end
                end
            end
        end
        task.wait(0.5)
    end
end)

-- Auto Cháº·t Gá»—
task.spawn(function()
    while true do
        if autoWood then
            for _,tree in pairs(workspace:GetDescendants()) do
                if tree:IsA("Model") and tree.Name:lower():find("tree") and tree:FindFirstChild("HumanoidRootPart") then
                    if (hrp.Position - tree.HumanoidRootPart.Position).Magnitude < 20 then
                        local axe = lp.Backpack:FindFirstChild("Axe") or lp.Character:FindFirstChild("Axe")
                        if axe then
                            axe.Parent = lp.Character
                            axe:Activate()
                        end
                    end
                end
            end
        end
        task.wait(1)
    end
end)

-- Auto Attack
local function attack()
    local tool = lp.Character and lp.Character:FindFirstChildOfClass("Tool")
    if tool then pcall(function() tool:Activate() end) end
end

-- Fram Boss
RunService.Heartbeat:Connect(function()
    if running then
        local target = getTarget()
        if target and target:FindFirstChild("HumanoidRootPart") then
            local angle = tick() * speed
            local offset = Vector3.new(math.cos(angle) * radius, 0, math.sin(angle) * radius)
            local goalPos = target.HumanoidRootPart.Position + offset
            local tween = TweenService:Create(hrp, TweenInfo.new(0.1), {CFrame = CFrame.new(goalPos, target.HumanoidRootPart.Position)})
            tween:Play()
            hum.AutoRotate = false
            hrp.CFrame = CFrame.new(hrp.Position, target.HumanoidRootPart.Position)
            if autoAttack then attack() end
            hpLabel.Text = "MÃ¡u Boss: " .. math.floor(target.Humanoid.Health)
        end
    end
    myHpLabel.Text = "MÃ¡u báº¡n: " .. math.floor(hum.Health) .. "/" .. math.floor(hum.MaxHealth)
end)
