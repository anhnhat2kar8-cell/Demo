local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local lp = Players.LocalPlayer
local chr = lp.Character or lp.CharacterAdded:Wait()
local hum = chr:WaitForChild("Humanoid")

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local Window = Fluent:CreateWindow({
    Title = "Cộng Đồng Việt Nam",
    SubTitle = "Farm Boss Tool",
    TabWidth = 160,
    Size = UDim2.fromOffset(520, 420),
    Acrylic = true,
    Theme = "Dark"
})

-- Tạo tab
local Tab = Window:AddTab({ Title = "Main", Icon = "home" })

-- Chọn vũ khí
local weaponDropdown = Tab:AddDropdown("Select Weapon", {
    Title = "Select Weapon",
    Values = {"Katana", "Gun", "Punch"},
    Multi = false,
    Default = "Katana"
})

local AutoQuai = false
local FarmBoss = false
local AutoLoot = false
local TeleBoss = false
local SelectedWeapon = nil

-- Kết nối UI
weaponDropdown:OnChanged(function(value)
    SelectedWeapon = value
end)

Tab:AddToggle("Auto Quái", {Title = "Auto Quái", Default = false}):OnChanged(function(v)
    AutoQuai = v
end)

Tab:AddToggle("Farm Boss", {Title = "Farm Boss", Default = false}):OnChanged(function(v)
    FarmBoss = v
end)

Tab:AddToggle("Auto Loot", {Title = "Auto Loot (Range 500)", Default = false}):OnChanged(function(v)
    AutoLoot = v
end)

Tab:AddButton({
    Title = "Tele vào chỗ boss",
    Callback = function()
        local boss = workspace:FindFirstChild("Boss")
        if boss and boss:FindFirstChild("HumanoidRootPart") then
            chr:PivotTo(boss.HumanoidRootPart.CFrame * CFrame.new(0,0,5))
        end
    end
})

-- Auto chức năng
RunService.RenderStepped:Connect(function()
    if AutoQuai then
        for _, mob in pairs(workspace.Monsters:GetChildren()) do
            if mob:FindFirstChild("Humanoid") and mob.Humanoid.Health > 0 then
                hum:MoveTo(mob.HumanoidRootPart.Position)
                if SelectedWeapon then
                    game:GetService("ReplicatedStorage").Events.Combat:FireServer(mob, SelectedWeapon)
                end
                break
            end
        end
    end

    if FarmBoss then
        local boss = workspace:FindFirstChild("Boss")
        if boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
            hum:MoveTo(boss.HumanoidRootPart.Position)
            if SelectedWeapon then
                game:GetService("ReplicatedStorage").Events.Combat:FireServer(boss, SelectedWeapon)
            end
        end
    end

    if AutoLoot then
        for _, drop in pairs(workspace.Drops:GetChildren()) do
            if (drop.Position - chr.HumanoidRootPart.Position).Magnitude <= 500 then
                chr:PivotTo(drop.CFrame)
                firetouchinterest(chr.HumanoidRootPart, drop, 0)
                firetouchinterest(chr.HumanoidRootPart, drop, 1)
            end
        end
    end
end)
