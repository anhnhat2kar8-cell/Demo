local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local lp = Players.LocalPlayer
local chr = lp.Character or lp.CharacterAdded:Wait()
local hum = chr:WaitForChild("Humanoid")
local hrp = chr:WaitForChild("HumanoidRootPart")

-- Bi·∫øn tr·∫°ng th√°i
local running = false
local autoAttack = false
local autoHeal = false
local autoLoot = false
local autoWood = false
local radius, speed = 20, 2
local lastWeapon = nil

--// GUI
local gui = Instance.new("ScreenGui", lp:WaitForChild("PlayerGui"))
gui.Name = "MatNhanThucMenu"

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 300, 0, 400)
frame.Position = UDim2.new(0.3, 0, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
frame.BorderSizePixel = 0
Instance.new("UICorner", frame).CornerRadius = UDim.new(0,10)

-- Thanh ti√™u ƒë·ªÅ
local titleBar = Instance.new("Frame", frame)
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.BackgroundColor3 = Color3.fromRGB(40,40,40)
Instance.new("UICorner", titleBar).CornerRadius = UDim.new(0,10)

-- Ch·ªØ ti√™u ƒë·ªÅ
local titleText = Instance.new("TextLabel", titleBar)
titleText.Size = UDim2.new(0.8, 0, 1, 0)
titleText.Position = UDim2.new(0, 10, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "üåÄ M·∫•t Nh·∫≠n Th·ª©c"
titleText.TextColor3 = Color3.new(1,1,1)
titleText.TextScaled = true
titleText.Font = Enum.Font.SourceSansBold
titleText.TextXAlignment = Enum.TextXAlignment.Left

-- Hi·ªáu ·ª©ng c·∫ßu v·ªìng
task.spawn(function()
    local hue = 0
    while titleText do
        hue = (hue + 1) % 360
        titleText.TextColor3 = Color3.fromHSV(hue/360,1,1)
        task.wait(0.05)
    end
end)

-- N√∫t thu nh·ªè
local toggleBtn = Instance.new("TextButton", titleBar)
toggleBtn.Size = UDim2.new(0.2, -10, 1, -6)
toggleBtn.Position = UDim2.new(0.8, 5, 0, 3)
toggleBtn.Text = "üîΩ"
toggleBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
toggleBtn.TextScaled = true
toggleBtn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0,8)

-- Cho ph√©p k√©o Frame b·∫±ng titleBar
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)
titleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- ScrollingFrame ch·ª©a c√°c n√∫t
local scroll = Instance.new("ScrollingFrame", frame)
scroll.Size = UDim2.new(1, -20, 1, -45)
scroll.Position = UDim2.new(0,10,0,40)
scroll.CanvasSize = UDim2.new(0,0,0,0)
scroll.ScrollBarThickness = 5
scroll.BackgroundTransparency = 1

local list = Instance.new("UIListLayout", scroll)
list.SortOrder = Enum.SortOrder.LayoutOrder
list.Padding = UDim.new(0,5)
list:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scroll.CanvasSize = UDim2.new(0,0,0,list.AbsoluteContentSize.Y+10)
end)

-- ·∫®n/hi·ªán n·ªôi dung khi b·∫•m n√∫t thu nh·ªè
local minimized = false
toggleBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        scroll.Visible = false
        frame.Size = UDim2.new(0,300,0,40)
        toggleBtn.Text = "üîº"
    else
        scroll.Visible = true
        frame.Size = UDim2.new(0,300,0,400)
        toggleBtn.Text = "üîΩ"
    end
end)

-- Label m√°u Boss
local hpLabel = Instance.new("TextLabel", scroll)
hpLabel.Size = UDim2.new(1,0,0,30)
hpLabel.Text = "M√°u Boss: ..."
hpLabel.TextColor3 = Color3.new(1,0,0)
hpLabel.BackgroundTransparency = 1
hpLabel.TextScaled = true

-- Label m√°u b·∫°n
local myHpLabel = Instance.new("TextLabel", scroll)
myHpLabel.Size = UDim2.new(1,0,0,30)
myHpLabel.Text = "M√°u b·∫°n: ..."
myHpLabel.TextColor3 = Color3.new(0,1,0)
myHpLabel.BackgroundTransparency = 1
myHpLabel.TextScaled = true

-- H√†m t·∫°o n√∫t b·∫≠t/t·∫Øt
local function makeSwitch(text, callback)
    local btn = Instance.new("TextButton", scroll)
    btn.Size = UDim2.new(1,0,0,35)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.Text = "‚èπ "..text
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.SourceSansBold
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

    local state = false
    btn.MouseButton1Click:Connect(function()
        state = not state
        if state then
            btn.BackgroundColor3 = Color3.fromRGB(0,170,255)
            btn.Text = "‚úÖ "..text
        else
            btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
            btn.Text = "‚èπ "..text
        end
        callback(state)
    end)
end

-- H√†m nh·∫≠p s·ªë
local function makeInput(labelText, default, callback)
    local container = Instance.new("Frame", scroll)
    container.Size = UDim2.new(1,0,0,30)
    container.BackgroundTransparency = 1

    local label = Instance.new("TextLabel", container)
    label.Size = UDim2.new(0.5, -5, 1, 0)
    label.Text = labelText
    label.TextColor3 = Color3.new(1,1,1)
    label.BackgroundTransparency = 1
    label.TextScaled = true

    local box = Instance.new("TextBox", container)
    box.Size = UDim2.new(0.5, -5, 1, 0)
    box.Position = UDim2.new(0.5,5,0,0)
    box.Text = tostring(default)
    box.BackgroundColor3 = Color3.fromRGB(40,40,40)
    box.TextColor3 = Color3.new(1,1,1)
    box.TextScaled = true
    Instance.new("UICorner", box).CornerRadius = UDim.new(0,6)

    box.FocusLost:Connect(function()
        local num = tonumber(box.Text)
        if num then callback(num) else box.Text = tostring(default) end
    end)
end

-- C√°c toggle
makeSwitch("Fram Boss", function(v) running = v end)
makeSwitch("Auto Attack", function(v) autoAttack = v end)
makeSwitch("Auto Heal", function(v) autoHeal = v end)
makeSwitch("Auto Loot", function(v) autoLoot = v end)
makeSwitch("Ch·∫∑t G·ªó", function(v) autoWood = v end)

-- Input ch·ªânh Radius/Speed
makeInput("Kho·∫£ng c√°ch", radius, function(v) radius = v end)
makeInput("T·ªëc ƒë·ªô quay", speed, function(v) speed = v end)

-- ==== C√°c ph·∫ßn Auto Heal / Loot / Wood / Fram Boss gi·ªëng code tr∆∞·ªõc (kh√¥ng ƒë·ªïi) ====
