--// Auto Attack + Safe Speed (BodyVelocity Bypass) + GUI
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Cài đặt
local autoAttack = false
local safeSpeed = false
local speedValue = 80   -- tốc độ chạy an toàn
local attackDelay = 0.2 -- delay đánh

-- GUI
local ScreenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local Frame = Instance.new("Frame", ScreenGui)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.Position = UDim2.new(0.05, 0, 0.3, 0)
Frame.Size = UDim2.new(0, 180, 0, 150)
Frame.Active, Frame.Draggable = true, true
Instance.new("UICorner", Frame)

local Title = Instance.new("TextLabel", Frame)
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "Auto Script Menu"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

local ToggleAttack = Instance.new("TextButton", Frame)
ToggleAttack.Position = UDim2.new(0.1, 0, 0.3, 0)
ToggleAttack.Size = UDim2.new(0.8, 0, 0, 40)
ToggleAttack.Text = "Auto Attack: OFF"
ToggleAttack.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
ToggleAttack.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", ToggleAttack)

local ToggleSpeed = Instance.new("TextButton", Frame)
ToggleSpeed.Position = UDim2.new(0.1, 0, 0.65, 0)
ToggleSpeed.Size = UDim2.new(0.8, 0, 0, 40)
ToggleSpeed.Text = "Speed: OFF"
ToggleSpeed.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
ToggleSpeed.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", ToggleSpeed)

-- Auto attack khi cầm vũ khí
task.spawn(function()
	while true do
		if autoAttack and player.Character then
			local tool = player.Character:FindFirstChildOfClass("Tool")
			if tool then
				pcall(function()
					tool:Activate()
				end)
			end
		end
		task.wait(attackDelay)
	end
end)

-- Safe speed bằng BodyVelocity
local bodyVel

RunService.Heartbeat:Connect(function()
	if safeSpeed and character and humanoid and humanoid.MoveDirection.Magnitude > 0 then
		if not bodyVel or not bodyVel.Parent then
			bodyVel = Instance.new("BodyVelocity")
			bodyVel.MaxForce = Vector3.new(1e5, 0, 1e5)
			bodyVel.Velocity = Vector3.zero
			bodyVel.Parent = humanoid.RootPart
		end
		bodyVel.Velocity = humanoid.MoveDirection * speedValue
	elseif bodyVel then
		bodyVel.Velocity = Vector3.zero
	end
end)

player.CharacterAdded:Connect(function(char)
	character = char
	humanoid = character:WaitForChild("Humanoid")
end)

-- Toggle buttons
ToggleAttack.MouseButton1Click:Connect(function()
	autoAttack = not autoAttack
	if autoAttack then
		ToggleAttack.Text = "Auto Attack: ON"
		ToggleAttack.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	else
		ToggleAttack.Text = "Auto Attack: OFF"
		ToggleAttack.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
	end
end)

ToggleSpeed.MouseButton1Click:Connect(function()
	safeSpeed = not safeSpeed
	if safeSpeed then
		ToggleSpeed.Text = "Speed: ON (" .. speedValue .. ")"
		ToggleSpeed.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	else
		if bodyVel then bodyVel:Destroy() end
		ToggleSpeed.Text = "Speed: OFF"
		ToggleSpeed.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
	end
end)
