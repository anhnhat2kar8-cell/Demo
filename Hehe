-- Auto Collect Multiple ProximityPrompts (Smooth)
-- LocalScript / Executor Script

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Character setup (anti respawn bug)
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

player.CharacterAdded:Connect(function(char)
    character = char
    humanoidRootPart = char:WaitForChild("HumanoidRootPart")
end)

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

local Toggle = Instance.new("TextButton")
Toggle.Size = UDim2.new(0, 200, 0, 50)
Toggle.Position = UDim2.new(0.05, 0, 0.3, 0)
Toggle.Text = "‚ö° Auto Nh·∫∑t Ti·ªÅn: T·∫Øt ‚ö°"
Toggle.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
Toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
Toggle.TextScaled = true
Toggle.Parent = ScreenGui

local autoCollect = false
Toggle.MouseButton1Click:Connect(function()
    autoCollect = not autoCollect
    if autoCollect then
        Toggle.Text = "‚ö° Auto Nh·∫∑t Ti·ªÅn: B·∫≠t ‚ö°"
        Toggle.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    else
        Toggle.Text = "‚ö° Auto Nh·∫∑t Ti·ªÅn: T·∫Øt ‚ö°"
        Toggle.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    end
end)

-- T√¨m t·∫•t c·∫£ ProximityPrompt trong t·∫ßm
local function getNearbyPrompts()
    local prompts = {}

    if not humanoidRootPart then return prompts end

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("ProximityPrompt")
        and obj.Parent:IsA("BasePart")
        and obj.Enabled then

            -- üîí N·∫øu mu·ªën l·ªçc ti·ªÅn, m·ªü d√≤ng d∆∞·ªõi
            -- if obj.Name ~= "MoneyPrompt" then continue end

            local distance = (humanoidRootPart.Position - obj.Parent.Position).Magnitude
            if distance <= obj.MaxActivationDistance then
                table.insert(prompts, obj)
            end
        end
    end

    return prompts
end

-- Auto Collect Loop
task.spawn(function()
    while task.wait(0.2) do
        if autoCollect then
            local prompts = getNearbyPrompts()

            for _, prompt in ipairs(prompts) do
                pcall(function()
                    fireproximityprompt(prompt)
                end)
            end
        end
    end
end)
