-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

local LocalPlayer = Players.LocalPlayer

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 220, 0, 260) -- tƒÉng chi·ªÅu cao ƒë·ªÉ v·ª´a n√∫t m·ªõi
MainFrame.Position = UDim2.new(1, -240, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BackgroundTransparency = 0.3
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 25)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "‚ò†Ô∏è M·∫•t Nh·∫≠n Th·ª©c ‚ò†Ô∏è"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.Parent = MainFrame

-- Buttons
local function createButton(text, posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 180, 0, 35)
    btn.Position = UDim2.new(0, 20, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.BackgroundTransparency = 0.2
    btn.Text = text
    btn.TextSize = 14
    btn.Font = Enum.Font.Gotham
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = MainFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    return btn
end

local AttackButton = createButton(" Auto Attack ‚öîÔ∏è", 40)
local SpinButton = createButton(" Xoay üîÑ", 85)
local SpeedButton = createButton(" T·ªëc ƒë·ªô üèÉ", 130)
local BandageButton = createButton(" Auto Bandage üíä", 175)
local TakeBandageButton = createButton(" L·∫•y Bandage üíä", 220) -- n√∫t m·ªõi

-- Variables
local AutoAttack = false
local AutoSpin = false
local SpeedBoost = false
local AutoBandage = false
local SpinSpeed = 2500
local AttackDelay = 0.08
local NormalSpeed = 16
local BoostSpeed = 32
local HealThreshold = 50 -- m√°u d∆∞·ªõi 50% th√¨ d√πng bƒÉng g·∫°c

-- Button Logic
AttackButton.MouseButton1Click:Connect(function()
    AutoAttack = not AutoAttack
    AttackButton.Text = " Auto Attack "..(AutoAttack and "‚úÖ" or "‚öîÔ∏è")
end)

SpinButton.MouseButton1Click:Connect(function()
    AutoSpin = not AutoSpin
    SpinButton.Text = " Xoay "..(AutoSpin and "‚úÖ" or "üîÑ")
end)

SpeedButton.MouseButton1Click:Connect(function()
    SpeedBoost = not SpeedBoost
    SpeedButton.Text = " T·ªëc ƒë·ªô "..(SpeedBoost and "‚úÖ" or "üèÉ")
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = SpeedBoost and BoostSpeed or NormalSpeed
    end
end)

BandageButton.MouseButton1Click:Connect(function()
    AutoBandage = not AutoBandage
    BandageButton.Text = " Auto Bandage "..(AutoBandage and "‚úÖ" or "üíä")
end)

TakeBandageButton.MouseButton1Click:Connect(function()
    local backpack = LocalPlayer:FindFirstChild("Backpack")
    local char = LocalPlayer.Character
    if backpack and char then
        for _, item in ipairs(backpack:GetChildren()) do
            if item:IsA("Tool") and string.find(item.Name:lower(), "bandage") then
                item.Parent = char -- ƒë∆∞a bƒÉng g·∫°c ra Character
            end
        end
    end
end)

-- Gi·ªØ t·ªëc ƒë·ªô khi respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    local humanoid = char:WaitForChild("Humanoid")
    humanoid.WalkSpeed = SpeedBoost and BoostSpeed or NormalSpeed
end)

-- Auto Attack Loop
task.spawn(function()
    while true do
        if AutoAttack and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool") then
            VirtualUser:ClickButton1(Vector2.new())
        end
        task.wait(AttackDelay)
    end
end)

-- Auto Spin Loop
RunService.RenderStepped:Connect(function(deltaTime)
    if AutoSpin and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame *= CFrame.Angles(0, math.rad(SpinSpeed * deltaTime), 0)
    end
end)

-- Auto Bandage Loop
task.spawn(function()
    while true do
        if AutoBandage and LocalPlayer.Character then
            local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health < HealThreshold then
                local backpack = LocalPlayer:FindFirstChild("Backpack")
                if backpack then
                    local bandage = backpack:FindFirstChildWhichIsA("Tool")
                    if bandage then
                        bandage.Parent = LocalPlayer.Character
                        bandage:Activate()
                    end
                end
            end
        end
        task.wait(0.5)
    end
end)
