--// Auto Click + Infinite WalkSpeed + GUI (Fix không bị khựng khi xoay camera)
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Cài đặt
local autoClick = false
local infiniteSpeed = false
local walkSpeedValue = 100

-- GUI
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local ToggleClick = Instance.new("TextButton")
local ToggleSpeed = Instance.new("TextButton")
local Title = Instance.new("TextLabel")

ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Frame.Position = UDim2.new(0.05, 0, 0.3, 0)
Frame.Size = UDim2.new(0, 180, 0, 150)
Frame.Active = true
Frame.Draggable = true

UICorner.Parent = Frame

Title.Parent = Frame
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1, 0, 0, 30)
Title.Text = "Auto Script Menu"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18

ToggleClick.Parent = Frame
ToggleClick.Position = UDim2.new(0.1, 0, 0.3, 0)
ToggleClick.Size = UDim2.new(0.8, 0, 0, 40)
ToggleClick.Text = "Auto Click: OFF"
ToggleClick.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ToggleClick.TextColor3 = Color3.fromRGB(255, 255, 255)
UICorner:Clone().Parent = ToggleClick

ToggleSpeed.Parent = Frame
ToggleSpeed.Position = UDim2.new(0.1, 0, 0.65, 0)
ToggleSpeed.Size = UDim2.new(0.8, 0, 0, 40)
ToggleSpeed.Text = "Speed: OFF"
ToggleSpeed.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
ToggleSpeed.TextColor3 = Color3.fromRGB(255, 255, 255)
UICorner:Clone().Parent = ToggleSpeed

-- Auto click (dùng Tool:Activate để không khựng camera)
task.spawn(function()
	while task.wait(0.1) do
		if autoClick and player.Character then
			local tool = player.Character:FindFirstChildOfClass("Tool")
			if tool then
				pcall(function()
					tool:Activate()
				end)
			end
		end
	end
end)

-- Speed control
local function applySpeed(humanoid)
	if infiniteSpeed then
		humanoid.WalkSpeed = walkSpeedValue
		humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
			if infiniteSpeed then
				humanoid.WalkSpeed = walkSpeedValue
			end
		end)
	end
end

applySpeed(humanoid)

player.CharacterAdded:Connect(function(char)
	character = char
	humanoid = character:WaitForChild("Humanoid")
	applySpeed(humanoid)
end)

-- Toggle buttons
ToggleClick.MouseButton1Click:Connect(function()
	autoClick = not autoClick
	if autoClick then
		ToggleClick.Text = "Auto Click: ON"
		ToggleClick.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	else
		ToggleClick.Text = "Auto Click: OFF"
		ToggleClick.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
	end
end)

ToggleSpeed.MouseButton1Click:Connect(function()
	infiniteSpeed = not infiniteSpeed
	if infiniteSpeed then
		humanoid.WalkSpeed = walkSpeedValue
		ToggleSpeed.Text = "Speed: ON (" .. walkSpeedValue .. ")"
		ToggleSpeed.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
	else
		humanoid.WalkSpeed = 16 -- tốc độ mặc định
		ToggleSpeed.Text = "Speed: OFF"
		ToggleSpeed.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
	end
end)
