-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local TweenService = game:GetService("TweenService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local LocalPlayer = Players.LocalPlayer

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 220, 0, 280)
MainFrame.Position = UDim2.new(1, -240, 0.3, 0)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
MainFrame.BackgroundTransparency = 0.3
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

-- Vi·ªÅn 7 m√†u bo tr√≤n 4 g√≥c
local border = Instance.new("Frame")
border.Size = UDim2.new(1, 8, 1, 8)
border.Position = UDim2.new(0, -4, 0, -4)
border.BackgroundTransparency = 1
border.ZIndex = MainFrame.ZIndex - 1
border.Parent = MainFrame
Instance.new("UICorner", border).CornerRadius = UDim.new(0, 12)

local sides = {}
for i = 1, 4 do
    local side = Instance.new("Frame")
    side.BackgroundColor3 = Color3.fromRGB(255,0,0)
    side.BorderSizePixel = 0
    side.Parent = border
    table.insert(sides, side)
end

-- K√≠ch th∆∞·ªõc 4 c·∫°nh
sides[1].Size = UDim2.new(1, 0, 0, 4); sides[1].Position = UDim2.new(0, 0, 0, 0)      
sides[2].Size = UDim2.new(1, 0, 0, 4); sides[2].Position = UDim2.new(0, 0, 1, -4)     
sides[3].Size = UDim2.new(0, 4, 1, 0); sides[3].Position = UDim2.new(0, 0, 0, 0)      
sides[4].Size = UDim2.new(0, 4, 1, 0); sides[4].Position = UDim2.new(1, -4, 0, 0)     

-- M·∫£ng 7 m√†u
local colors = {
    Color3.fromRGB(255,0,0),
    Color3.fromRGB(255,127,0),
    Color3.fromRGB(255,255,0),
    Color3.fromRGB(0,255,0),
    Color3.fromRGB(0,0,255),
    Color3.fromRGB(75,0,130),
    Color3.fromRGB(148,0,211),
}

-- Animation vi·ªÅn
local index = 0
RunService.RenderStepped:Connect(function(deltaTime)
    index = index + deltaTime * 5
    for i, side in ipairs(sides) do
        local colorIndex = math.floor((index + i) % #colors) + 1
        side.BackgroundColor3 = colors[colorIndex]
    end
end)

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 25)
Title.Position = UDim2.new(0, 0, 0, 5)
Title.BackgroundTransparency = 1
Title.Text = "‚ò†Ô∏è M·∫•t Nh·∫≠n Th·ª©c ‚ò†Ô∏è"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Center
Title.TextYAlignment = Enum.TextYAlignment.Center
Title.Parent = MainFrame

-- Subtitle
local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(1, 0, 0, 16)
Subtitle.Position = UDim2.new(0, 0, 0, 32)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "Phi√™n b·∫£n Vip M·∫•t Nh·∫≠n Th·ª©c"
Subtitle.Font = Enum.Font.Gotham
Subtitle.TextSize = 12
Subtitle.TextColor3 = Color3.fromRGB(255, 0, 0)
Subtitle.TextXAlignment = Enum.TextXAlignment.Center
Subtitle.TextYAlignment = Enum.TextYAlignment.Center
Subtitle.Parent = MainFrame

-- Create Button
local function createButton(text, posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0, 200, 0, 35)
    btn.Position = UDim2.new(0, 10, 0, posY)
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.BackgroundTransparency = 0.2
    btn.Text = text
    btn.TextSize = 14
    btn.Font = Enum.Font.Gotham
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Parent = MainFrame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
    return btn
end

-- Buttons
local AttackButton = createButton("‚öîÔ∏è Auto Attack", 55)
local SpinButton = createButton("üîÑ Xoay", 95)
local SpeedButton = createButton("üèÉ T·ªëc ƒë·ªô", 135)
local ShowHPButton = createButton("‚ô•Ô∏è Hi·ªán HP Player", 175)
local BandageButton = createButton("ü©π L·∫•y bƒÉng g·∫°c", 215)

-- Variables
local AutoAttack = false
local AutoSpin = false
local SpeedBoost = false
local ShowHP = false
local SpinSpeed = 2500
local AttackDelay = 0.08
local NormalSpeed = 16
local BoostSpeed = 32

local BandageCooldown = 6
local LastBandageTime = 0
local BandageBusy = false

-- Button Logic
AttackButton.MouseButton1Click:Connect(function()
    AutoAttack = not AutoAttack
    AttackButton.Text = "‚öîÔ∏è Auto Attack "..(AutoAttack and "‚úÖ" or "")
end)

SpinButton.MouseButton1Click:Connect(function()
    AutoSpin = not AutoSpin
    SpinButton.Text = "üîÑ Xoay "..(AutoSpin and "‚úÖ" or "")
end)

SpeedButton.MouseButton1Click:Connect(function()
    SpeedBoost = not SpeedBoost
    SpeedButton.Text = "üèÉ T·ªëc ƒë·ªô "..(SpeedBoost and "‚úÖ" or "")
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = SpeedBoost and BoostSpeed or NormalSpeed
    end
end)

ShowHPButton.MouseButton1Click:Connect(function()
    ShowHP = not ShowHP
    ShowHPButton.Text = "‚ô•Ô∏è Hi·ªán HP Player "..(ShowHP and "‚úÖ" or "")
end)

LocalPlayer.CharacterAdded:Connect(function(char)
    local humanoid = char:WaitForChild("Humanoid")
    humanoid.WalkSpeed = SpeedBoost and BoostSpeed or NormalSpeed
end)

-- Auto Attack Loop
task.spawn(function()
    while true do
        if AutoAttack and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Tool") then
            VirtualUser:ClickButton1(Vector2.new())
        end
        task.wait(AttackDelay)
    end
end)

-- Auto Spin Loop
RunService.RenderStepped:Connect(function(deltaTime)
    if AutoSpin and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame *= CFrame.Angles(0, math.rad(SpinSpeed * deltaTime), 0)
    end
end)

-- Show HP Player
local PlayerHPGuis = {}
RunService.RenderStepped:Connect(function()
    if ShowHP then
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local head = player.Character.Head
                if not PlayerHPGuis[player] then
                    local billboard = Instance.new("BillboardGui")
                    billboard.Size = UDim2.new(0, 100, 0, 30)
                    billboard.Adornee = head
                    billboard.AlwaysOnTop = true
                    billboard.Parent = head

                    local hpLabel = Instance.new("TextLabel")
                    hpLabel.Size = UDim2.new(1,0,1,0)
                    hpLabel.BackgroundTransparency = 1
                    hpLabel.TextColor3 = Color3.fromRGB(255,0,0)
                    hpLabel.Font = Enum.Font.GothamBold
                    hpLabel.TextSize = 14
                    hpLabel.TextStrokeTransparency = 0
                    hpLabel.Parent = billboard

                    PlayerHPGuis[player] = hpLabel
                end
                local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    PlayerHPGuis[player].Text = string.format("%d / %d", math.floor(humanoid.Health), math.floor(humanoid.MaxHealth))
                end
            end
        end
    else
        for player, gui in pairs(PlayerHPGuis) do
            if gui and gui.Parent then
                gui.Parent:Destroy()
            end
        end
        PlayerHPGuis = {}
    end
end)

-- Take Bandage
local function takeBandage()
    if BandageBusy then return end
    if tick() < LastBandageTime then
        BandageButton.Text = "‚è≥ Ch·ªù "..math.floor(LastBandageTime - tick()).."s"
        return
    end
    local char = LocalPlayer.Character
    if char and char:FindFirstChildOfClass("Tool") then
        BandageButton.Text = "‚ö† B·ªè v≈© kh√≠ xu·ªëng!"
        return
    end
    BandageBusy = true
    BandageButton.Text = "ƒêang l·∫•y bƒÉng g·∫°c..."
    task.spawn(function()
        local success = pcall(function()
            local knitIndex = ReplicatedStorage:FindFirstChild("KnitPackages") 
                and ReplicatedStorage.KnitPackages._Index:FindFirstChild("sleitnick_knit@1.7.0")
            if knitIndex then
                local invService = knitIndex.knit.Services.InventoryService.RE.updateInventory
                if invService then
                    invService:FireServer("refresh")
                    task.wait(0.3)
                    invService:FireServer("eue","bƒÉng g·∫°c")
                end
            end
        end)
        if success then
            BandageButton.Text = "‚úÖ ƒê√£ l·∫•y bƒÉng g·∫°c!"
            LastBandageTime = tick() + BandageCooldown
            for i = BandageCooldown, 1, -1 do
                BandageButton.Text = "ü©π ("..i..")"
                task.wait(1)
            end
            BandageButton.Text = "ü©π L·∫•y bƒÉng g·∫°c"
        else
            BandageButton.Text = "‚ùå L·ªói l·∫•y bƒÉng g·∫°c"
        end
        BandageBusy = false
    end)
end
BandageButton.MouseButton1Click:Connect(takeBandage)
