local Players = game:GetService("Players")
local player = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- Đợi PlayerGui load
local playerGui = player:WaitForChild("PlayerGui")

-- Nếu có GUI cũ thì xóa
if playerGui:FindFirstChild("AutoFarmGUI") then
    playerGui:FindFirstChild("AutoFarmGUI"):Destroy()
end

-- Cài đặt
local attackInterval = 0.2 -- tốc độ đánh
local customWalkSpeed = 30 -- tốc độ chạy

-- Trạng thái
local autoAttack = false
local speedBoost = false

-- Lấy nhân vật
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoFarmGUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = playerGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 120)
Frame.Position = UDim2.new(0.05, 0, 0.2, 0)
Frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UIStroke = Instance.new("UIStroke")
UIStroke.Thickness = 2
UIStroke.Color = Color3.fromRGB(0, 200, 255)
UIStroke.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 30)
Title.BackgroundTransparency = 1
Title.Text = "⚔️ Auto Script Menu"
Title.TextColor3 = Color3.new(1,1,1)
Title.TextScaled = true
Title.Parent = Frame

-- Nút Auto Attack
local AttackBtn = Instance.new("TextButton")
AttackBtn.Size = UDim2.new(1, -20, 0, 30)
AttackBtn.Position = UDim2.new(0, 10, 0, 40)
AttackBtn.Text = "Auto Attack: OFF"
AttackBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
AttackBtn.TextColor3 = Color3.new(1,1,1)
AttackBtn.TextScaled = true
AttackBtn.Parent = Frame

-- Nút Speed
local SpeedBtn = Instance.new("TextButton")
SpeedBtn.Size = UDim2.new(1, -20, 0, 30)
SpeedBtn.Position = UDim2.new(0, 10, 0, 80)
SpeedBtn.Text = "Speed Boost: OFF"
SpeedBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
SpeedBtn.TextColor3 = Color3.new(1,1,1)
SpeedBtn.TextScaled = true
SpeedBtn.Parent = Frame

--  Auto Attack
task.spawn(function()
    while task.wait(attackInterval) do
        if autoAttack then
            local tool = character:FindFirstChildOfClass("Tool")
            if tool then
                pcall(function()
                    tool:Activate()
                end)
            end
        end
    end
end)

-- Speed Boost
humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
    if speedBoost then
        humanoid.WalkSpeed = customWalkSpeed
    end
end)

player.CharacterAdded:Connect(function(char)
    character = char
    humanoid = char:WaitForChild("Humanoid")
    task.wait(1)
    if speedBoost then
        humanoid.WalkSpeed = customWalkSpeed
    end
end)

-- Bật / Tắt bằng nút
AttackBtn.MouseButton1Click:Connect(function()
    autoAttack = not autoAttack
    AttackBtn.Text = "Auto Attack: " .. (autoAttack and "ON" or "OFF")
    AttackBtn.BackgroundColor3 = autoAttack and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(60, 60, 60)
end)

SpeedBtn.MouseButton1Click:Connect(function()
    speedBoost = not speedBoost
    if speedBoost then
        humanoid.WalkSpeed = customWalkSpeed
    end
    SpeedBtn.Text = "Speed Boost: " .. (speedBoost and "ON" or "OFF")
    SpeedBtn.BackgroundColor3 = speedBoost and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(60, 60, 60)
end)
